<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VerifiX AI</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-gray-200">

<!-- LOGIN MODAL -->
<div id="loginModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
  <div class="bg-slate-800 p-8 rounded-2xl w-full max-w-md">
    <h2 class="text-2xl font-bold text-cyan-400 mb-6 text-center">Login</h2>

    <input id="loginEmail" type="email" placeholder="Email"
      class="w-full mb-4 p-3 bg-black rounded border border-white/10">

    <input id="loginPassword" type="password" placeholder="Password"
      class="w-full mb-6 p-3 bg-black rounded border border-white/10">

    <button onclick="handleLogin()"
      class="w-full py-3 bg-cyan-400 rounded text-black font-bold">
      Login
    </button>

    <p id="loginError" class="text-red-400 text-sm mt-4 hidden"></p>
  </div>
</div>

<!-- MAIN APP -->
<div id="app" class="hidden p-10">

<h1 class="text-4xl font-bold mb-6">üõ°Ô∏è VerifiX AI</h1>

<textarea id="demoText" class="w-full p-4 bg-black rounded" rows="4"
placeholder="Enter text / news / claim..."></textarea>

<div class="mt-4 flex gap-3">
  <button onclick="verifyText()" class="bg-cyan-500 px-4 py-2 rounded">Text</button>
  <button onclick="verifyLink()" class="bg-pink-500 px-4 py-2 rounded">Link</button>
</div>

<div class="mt-4">
  <input type="file" id="pdfFile">
  <button onclick="verifyPDF()" class="bg-indigo-500 px-4 py-2 rounded">PDF</button>
</div>

<div class="mt-4">
  <input type="file" id="imgFile">
  <button onclick="verifyImage()" class="bg-purple-500 px-4 py-2 rounded">Image</button>
</div>

<pre id="result" class="mt-6 bg-black p-4 rounded"></pre>
</div>

<script>
const API = "http://YOUR_PUBLIC_IP:8000";

// Show login on load
document.getElementById("loginModal").classList.remove("hidden");

// LOGIN
async function handleLogin(){
  const email = loginEmail.value;
  const password = loginPassword.value;

  const res = await fetch(API+"/login",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({email,password})
  });

  const data = await res.json();

  if(data.success){
    loginModal.classList.add("hidden");
    app.classList.remove("hidden");
  } else {
    loginError.textContent = "Invalid login";
    loginError.classList.remove("hidden");
  }
}

// AI FUNCTIONS
async function verifyText(){
  const r = await fetch(API+"/verify/text",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({content:demoText.value})
  });
  result.innerText = JSON.stringify(await r.json(),null,2);
}

async function verifyLink(){
  const r = await fetch(API+"/verify/link",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({url:demoText.value})
  });
  result.innerText = JSON.stringify(await r.json(),null,2);
}

async function verifyPDF(){
  const fd = new FormData();
  fd.append("file", pdfFile.files[0]);
  const r = await fetch(API+"/verify/pdf",{method:"POST",body:fd});
  result.innerText = JSON.stringify(await r.json(),null,2);
}

async function verifyImage(){
  const fd = new FormData();
  fd.append("file", imgFile.files[0]);
  const r = await fetch(API+"/verify/image",{method:"POST",body:fd});
  result.innerText = JSON.stringify(await r.json(),null,2);
}
</script>

</body>
</html>
